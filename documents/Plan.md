# План автоматизации тестирования сервиса покупок путёвок через приложение интернет-банка.
## Список сценариев, предназначенных для автоматического тестирования:

### Перечень UI-тестов:
### 1. Позитивные сценарии:

1.1 **Успешная оплата валидной картой:**
      
`Ожидаемый результат:`
- данные успешно отправлены и могут быть просмотрены в соответствующей базе данных;
- появится всплывающее окно об одобрении операции банком; 
    
1.2 **Успешная выдача кредита с валидной картой:**
      
`Ожидаемый результат`:
        
- появление сообщения о том, что банк одобрил кредит;
        
- данные успешно отправлены и могут быть просмотрены в соответствующей базе данных;
       
- появление всплывающего окна, которое сообщает о том, что операция одобрена банком;
### 2. Негативные сценарии, связанные с отправкой невалидных значений в полях заполнения формы:
**Пустая форма:**
   
 - **Отправка пустой формы:**    
      
`Ожидаемый результат:`
       
 - данные не отправлены;
 - под полем "Номер карты" появится сообщение `Неверный формат`;
 - под полем "Месяц" появится сообщение `Неверный формат`;
 - под полем "Год" появится сообщение `Неверный формат`;
 - под полем "Владелец" появится сообщение `Поле обязательно для заполнения`;
 - под полем "CVC/CVV" появится сообщение `Неверный формат`.
### 3. Поле "Номер карты"
3.1 - **Отправка пустого поля:**
   
`Ожидаемый результат:`
        
 - данные не отправлены, появление указания об обязательности заполнения поля, записи в базе данных не создаются;
 - под полем "Номер карты" появится сообщение `Неверный формат`;

3.2 - **Отправка специальных символов:**     

`Ожидаемый результат:`

- значение не вводится в поле формы;
- данные не отправляются;
- записи в таблице базы данных не создаются;

3.3 - **Отправка русских и латинских букв**  

`Ожидаемый результат:`

- данные не вводятся в поле формы; 
- появляется всплывающее окно с указанием об обязательном заполнении поля;
- записи в базе данных не создаются; 
- данные не отправляются;

3.4 - **Отправка короткого номера карты:**

`Ожидаемый результат:`

- данные не отправлены;
- в поле "Номер карты" появится сообщение `Неверный формат`;
- записи в базе данных не создаются;

3.5 - **Отправка невалидного номера карты, который отсутствует в базе данных**  

`Ожидаемый результат:`

- данные не отправлены;
- появление сообщение об отказе оплаты банком;
- записи в базе данных не создаются;

### 4. "Поле месяц"

4.1 - **Отправка пустого поля "Месяц"**

`Ожидаемый результат`

- данные не отправлены;
- появляется сообщение об обязательности заполнения поля;
- записи в базе данных не создаются;

4.2 - **Отправка специальных символов**  

`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения об обязательности заполнения поля;
- записи в базе данных не создаются;

4.3 - **Отправка русских и латинских букв**  

`Ожидаемый результат:`

- данные не отправлены;
- значение не вводится в поле данных;
- появление сообщения об обязательном заполнении поля;
- записи в базе данных не создаются;

4.4 - **Отправка нерелевантных значений, к примеру - 000 или 0:**
 
`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения о неверном формате введённых данных;
- записи в базе данных не создаются;

4.5 - **Отправка нерелевантных значений более 12, к примеру - 20**  

`Ожидаемый результат:`
        
- данные не отправлены;
- данные не вводятся в поле формы;
- появление сообщения об неверном формате введённых данных;
- записи в базе данных не создаются;

### 5. Поле "Год"
    
5.1 - **Отправка пустого поля**    
      
`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения об обязательном заполнении поля;
- записи в базе данных не создаются;

5.2 - **Отправка специальных символов:**

`Ожидаемый результат:`

- данные не отправляются;
- данные не вводятся в поле формы;
- появление сообщения об обязательном заполнении формы;
- записи в базе данных не создаются;

5.3 - **Отправка русских и латинских букв**  
  
`Ожидаемый результат:`
    
- данные не отправлены;
- данные не вводятся в поле формы;
- появление сообщение об обязательности заполнения поля;
- записи в базе данных не создаются;

5.4 - **Отправка некорректных значений (прошлый год)**  
  
`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения об истёкшем действии карты;
- записи в базе данных не создаются

5.5 - **Отправка некорректных значений (менее двух цифр)**  
    
`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения о неверном формате введённых данных;
- записи в базе данных не создаются;

### 6. Поле "Владелец"

6.1 - **Отправка пустого поля**  
  
`Ожидаемый результат:`
    
- данные не отправлены;
- появление сообщения об обязательности заполнения поля;
- записи в базе данных не создаются;

6.2 - **Отправка специальных символов**

`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения о неверном формате введённых данных;
- записи в базе данных не создаются;

6.3 - **Отправка русскими буквами 2 слов**

`Ожидаемый результат:`

- данные не отправлены;
- появляется сообщение о неверном формате введённых данных;
- записи в базе данных не создаются;

6.4 - **Отправка чисел**

`Ожидаемый результат:`

- данные не отправлены;
- появляется сообщение о неверном формате введённых данных;
- записи в базе данных не создаются;

6.5 - **Отправка 3 и более слов латинскими буквами**

`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения о неверном формате введённых данных;
- записи в базе данных не создаются;

6.6 - **Отправка 1 слова латинскими буквами**

`Ожидаемый результат:`

- данные не отправляются;
- появляется сообщение о неверном формате введённых данных;
- записи в базе данных не создаются;

### 7. Поле "CVC/CVV"

7.1 - **Отправка пустого поля**

`Ожидаемый результат:`

- данные не отправляются
- появление сообщение об обязательном заполнении поля;
- записи в базе данных не создаются;

7.2 **Отправка специальных символов**

`Ожидаемый результат:`

- данные не отправляются;
- данные не вводятся в поле формы;
- появление сообщения об обязательном заполнении поля;
- записи в базе данных не создаются;

7.3 - **Отправка русских и латинских букв**    
  
`Ожидаемый результат:`

- данные не отправлены;
- данные не вводятся в поле формы;
- появление сообщения об обязательном заполнении поля;
- записи в базе данных не создаются;

7.4 - **Отправка одной цифры**  
  
`Ожидаемый результат:`

- данные не отправлены;
- появление сообщения о неверном формате введённых данных;
- записи в базе данных не создаются;

7.5 - **Отправка четырёх цифр**

`Ожидаемый результат:`

- появление сообщения об успешной оплате;
- в поле отобразилось только 3 первые цифры;
- в таблице базы данных появилась запись о данной операции;

### 8. Дополнительные и важные негативные сценарии:

8.1 - **Отказ в оплате с карты, которая имеет статус "Declined"**

`Ожидаемый результат`

- появление сообщения об отклонении операции банком;
- в таблице "Payment_entity" появляется запись, при этом значение поля "Status" - "Declined"
- в таблице "Order_entity" не формируется запись;

8.2 - **Отказ в выдаче кредита по валидной карте, имеющая статус "Declined"**

`Ожидаемый результат`

- появление сообщения об одобрении операции банком;
- появление в таблице "Credit_request_entity" записи - "значение поля status - "Declined" 
- в таблице "Order_entity" не формируется запись;

### API-тесты

Эти тесты необходимы для проверки того, что при попытке обращения к приложению через API сервис отдаёт аналогичные данные, что и при проведении UI-тестов. Эти тесты проверяют данные карт (номер, статус и тд.)  в базах данных и коды ответа при обращении к Payment Gate и Credit Gate.

### Исходные данные:

- валидный номер карты - 4444 4444 4444 4441;
- не валидный номер карты - 4444 4444 4444 4442.

### Примечание:
- ссылки перехода на страницу покупки тура **доступны только при запущенной SUT**.

1. При обращении к <http://localhost:8080/api/v1/pay> должны быть получены: код - 200 и карта c номером "4444 4444 4444 4441" отдает статус "Approved".
2. При обращении к <http://localhost:8080/api/v1/pay> должны быть получены: код - 200 и карта с номером "4444 4444 4444 4442" отдает статус "Declined".
3. При обращении к <http://localhost:8080/api/v1/credit> должны быть получены: код - 200 и карта c номером "4444 4444 4444 4441" отдает статус "Approved".
4. При обращении к <http://localhost:8080/api/v1/credit> должны быть получены: код - 200 и карта с номером "4444 4444 4444 4442" отдает статус "Declined".
5. При обращении к <http://localhost:8080/api/v1/pay> с невалидными полями должны быть получены: код - 400 и сообщение - "Bad Request".
6. При обращении к <http://localhost:8080/api/v1/credit> с невалидными полями должны быть получены: код - 400 и сообщение - "Bad Request".

## Перечень используемых инструментов и обоснование их выбора:
- JDK 11, т.к. будет использоваться язык программирования Java;
- IntelliJ IDEA, популярная и эффективная среда разработки программного обеспечения и подготовки авто-тестов;
- Gradle, инструмент управления зависимостями, а также продвинутая система автоматической сборки;
- DBeaver, для просмотра базы данных;
- JUnit-5, инструмент тестирования, более удобен нежели JUnit4 или TestNG;
- Selenide, фреймворк, который наиболее удобен при тестировании веб-приложений;
- MySQL connector Java, PostgreSQL и Commons DBUtils, для доступа к базе данным из кода авто-тестов;
- Lombok, плагин для автоматической генерации кода, его упрощения и сокращения;
- Docker, программное обеспечение для автоматизации развёртывания и управления приложениями. Необходим для развёртывания PostSQL, Node.js, а также СУБД MySQL;
- Faker, библиотека для генерации данных при отправке формы (к примеру:ФИО);
- GitHub, в качестве хранилища SUT, авто-тестов и всех необходимых файлов;
- GIT, система контроля версий, позволяет фиксировать изменения в коде, сохранять предыдущие версии, а также быстро "откатить" изменения назад;
- Allure, фреймворк для создания отчётов при выполнении авто-тестов;
- Allure-Selenide, для взаимодействия одного инструмента с другим;
## Перечень и описание возможных рисков при автоматизации:
- Вероятны сложности с настройкой SUT и Docker-compose.yml, также высока возможность наличия затруднений при запуске SUT (объявлена поддержка двух СУБД);
- Отсутствие подробной спецификации на приложение. Документация представлена не в полном объёме, присутствуют размытые требования;
- Достаточно высокий уровень сложности поиска необходимых локаторов на странице;
- Необходимость разработки новых тестов для заказчика, вследствие отсутствия подробной документации и спецификации на приложение;
- Высокая корреляция автоматизированных тестов от текущей реализации веб-элементов, потому что даже незначительное их изменение может привести к "падению" авто-тестов;
- Автоматизированные тесты не проверяют графическую составляющую приложения - "едет" ли верстка при тех или иных манипуляциях, насколько комфортна для пользователя гамма и выбранная цветовая схема оформления и тд., как ведёт себя приложение при работе на разных браузерах и операционных системах, устройствах;
## Интервальная оценка с учётом рисков (в часах):
- Подготовка к процессу тестирования - 18 часов;
- Составление тестов - ориентировочно 100 рабочих часов;
- Количество времени на составление баг-репортов - 35 часов;
- Составление отчёта о результатах проведения тестов - 30 часов;
- Разработка подробного отчёта по всему процессу автоматизации тестирования - 18 часов;
## План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации):
1. Написание тестов до 14 апреля 2022;
2. Предоставление информации о результатах тестирования (баг-репорты) до 19 апреля 2022;
3. Полномасштабный отчёт по итогам автоматизированного тестирования - через 4 рабочих дня после отчёта.  